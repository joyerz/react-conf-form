!function(e,n){if("object"==typeof exports&&"object"==typeof module)module.exports=n(require("react"),require("antd"),require("moment"));else if("function"==typeof define&&define.amd)define(["react","antd","moment"],n);else{var t="object"==typeof exports?n(require("react"),require("antd"),require("moment")):n(e.react,e.antd,e.moment);for(var r in t)("object"==typeof exports?exports:e)[r]=t[r]}}(window,(function(e,n,t){return function(e){var n={};function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}return t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:r})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(t.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var o in e)t.d(r,o,function(n){return e[n]}.bind(null,o));return r},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.p="",t(t.s=17)}([function(n,t){n.exports=e},function(e,t){e.exports=n},function(e,n){function t(){return e.exports=t=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},e.exports.default=e.exports,e.exports.__esModule=!0,t.apply(this,arguments)}e.exports=t,e.exports.default=e.exports,e.exports.__esModule=!0},function(e,n,t){var r=t(16);e.exports=function(e,n){if(null==e)return{};var t,o,a=r(e,n);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(e);for(o=0;o<u.length;o++)t=u[o],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,n){e.exports=t},function(e,n,t){var r=t(13),o=t(14),a=t(7),u=t(15);e.exports=function(e,n){return r(e)||o(e,n)||a(e,n)||u()},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,n){e.exports=function(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,n,t){var r=t(6);e.exports=function(e,n){if(e){if("string"==typeof e)return r(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?r(e,n):void 0}},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,n,t){var r=t(10),o=t(11),a=t(7),u=t(12);e.exports=function(e){return r(e)||o(e)||a(e)||u()},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,n){function t(n){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?(e.exports=t=function(e){return typeof e},e.exports.default=e.exports,e.exports.__esModule=!0):(e.exports=t=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.default=e.exports,e.exports.__esModule=!0),t(n)}e.exports=t,e.exports.default=e.exports,e.exports.__esModule=!0},function(e,n,t){var r=t(6);e.exports=function(e){if(Array.isArray(e))return r(e)},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,n){e.exports=function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,n){e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,n){e.exports=function(e){if(Array.isArray(e))return e},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,n){e.exports=function(e,n){var t=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null!=t){var r,o,a=[],u=!0,i=!1;try{for(t=t.call(e);!(u=(r=t.next()).done)&&(a.push(r.value),!n||a.length!==n);u=!0);}catch(e){i=!0,o=e}finally{try{u||null==t.return||t.return()}finally{if(i)throw o}}return a}},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,n){e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,n){e.exports=function(e,n){if(null==e)return{};var t,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)t=a[r],n.indexOf(t)>=0||(o[t]=e[t]);return o},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,n,t){"use strict";t.r(n),t.d(n,"Type",(function(){return E})),t.d(n,"extendFields",(function(){return O})),t.d(n,"extendRules",(function(){return A})),t.d(n,"Form",(function(){return T}));var r=t(8),o=t.n(r),a=t(5),u=t.n(a),i=t(0),l=t.n(i),c=t(1),f=function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8,n="1234567890ABCDEFGHIJKLMNOPQRSTUVWXYZ".split(""),t=[],r=0;r<e;r++){var o=Math.round(Math.random()*n.length);t.push(n[o])}return t.join("")},s=function(e){return""!==e&&null!=e||Array.isArray(e)&&e.length>0};var p=function(e){var n="form-label-width-".concat(e),t=document.getElementById(n);return t&&document.head.removeChild(t),n},d=t(2),v=t.n(d),m=t(3),h=t.n(m);var g=c.Input.Search;var y=t(4),x=t.n(y),C=function(e){return s(e)?x()(e).valueOf():null},b=function(e){return s(e)?x()(e):null},P=function(e){var n=[null,null];return Array.isArray(e)&&e.forEach((function(e,t){n[t]=C(e)})),n};var _={input:function(e){var n=e.onFieldChange,t=e.name,r=e.value,o=e.fieldProps;return l.a.createElement(c.Input,v()({},o,{onChange:function(){for(var e=arguments.length,a=new Array(e),u=0;u<e;u++)a[u]=arguments[u];var i=a[0].target.value;o.onChange&&o.onChange.apply(o,a),n&&n(t,i,r)},value:r}))},search:function(e){var n=e.onFieldChange,t=e.name,r=e.value,o=e.fieldProps;return l.a.createElement(g,v()({},o,{onChange:function(){for(var e=arguments.length,a=new Array(e),u=0;u<e;u++)a[u]=arguments[u];var i=a[0].target.value;o.onChange&&o.onChange.apply(o,a),n&&n(t,i,r)}}))},textarea:function(e){var n=e.onFieldChange,t=e.name,r=e.value,o=e.fieldProps;return l.a.createElement(c.Input.TextArea,v()({},o,{onChange:function(){for(var e=arguments.length,a=new Array(e),u=0;u<e;u++)a[u]=arguments[u];var i=a[0].target.value;o.onChange&&o.onChange.apply(o,a),n&&n(t,i,r)}}))},password:function(e){var n=e.onFieldChange,t=e.name,r=e.value,o=e.fieldProps;return l.a.createElement(c.Input.Password,v()({},o,{onChange:function(){for(var e=arguments.length,a=new Array(e),u=0;u<e;u++)a[u]=arguments[u];var i=a[0].target.value;o.onChange&&o.onChange.apply(o,a),n&&n(t,i,r)}}))},number:function(e){var n=e.onFieldChange,t=e.name,r=e.value,o=e.fieldProps;return l.a.createElement(c.InputNumber,v()({},o,{onChange:function(e){o.onChange&&o.onChange(e),n&&n(t,e,r)}}))},select:function(e){var n=e.onFieldChange,t=e.name,r=e.value,o=e.fieldProps;return l.a.createElement(c.Select,v()({},o,{onChange:function(e){o.onChange&&o.onChange(e),n&&n(t,e,r)}}))},switch:function(e){var n=e.onFieldChange,t=e.name,r=e.value,o=e.fieldProps;return l.a.createElement(c.Switch,v()({},o,{onChange:function(){var e=arguments.length<=0?void 0:arguments[0];o.onChange&&o.onChange.apply(o,arguments),n&&n(t,e,!!r)}}))},autoComplete:function(e){var n=e.onFieldChange,t=e.name,r=e.value,o=e.fieldProps;return null!=o&&o.filterOption||(o.filterOption=function(e,n){return e&&-1!==n.value.indexOf(e)}),l.a.createElement(c.AutoComplete,v()({},o,{onChange:function(){var e=arguments.length<=0?void 0:arguments[0];o.onChange&&o.onChange.apply(o,arguments),n&&n(t,e,r)}}))},checkbox:function(e){var n=e.onFieldChange,t=e.name,r=e.value,o=e.fieldProps;return l.a.createElement(c.Checkbox,v()({},o,{onChange:function(){for(var e=arguments.length,a=new Array(e),u=0;u<e;u++)a[u]=arguments[u];var i=a[0].target.checked;o.onChange&&o.onChange.apply(o,a),n&&n(t,i,r)},checked:r}),o.label)},checkboxGroup:function(e){var n=e.onFieldChange,t=e.name,r=e.value,o=e.fieldProps;return l.a.createElement(c.Checkbox.Group,v()({},o,{onChange:function(){var e=arguments.length<=0?void 0:arguments[0];o.onChange&&o.onChange.apply(o,arguments),n&&n(t,e,r)},value:r}))},datePicker:function(e){var n=e.onFieldChange,t=e.name,r=e.value,o=e.fieldProps;return l.a.createElement(c.DatePicker,v()({},o,{onChange:function(){var e=C(arguments.length<=0?void 0:arguments[0]);o.onChange&&o.onChange.apply(o,arguments),n&&n(t,e,r)},value:b(r)}))},rangePicker:function(e){var n=e.onFieldChange,t=e.name,r=e.value,o=e.fieldProps,a=function(e){var n=[null,null];return e&&Array.isArray(e)&&e.forEach((function(e,t){n[t]=e?x()(e):null})),n}(r);return l.a.createElement(c.DatePicker.RangePicker,v()({},o,{onChange:function(){var e=P(arguments.length<=0?void 0:arguments[0]);o.onChange&&o.onChange.apply(o,arguments),n&&n(t,e,r)},value:a}))},timePicker:function(e){var n=e.onFieldChange,t=e.name,r=e.value,o=e.fieldProps;return l.a.createElement(c.TimePicker,v()({},o,{onChange:function(){var e=C(arguments.length<=0?void 0:arguments[0]);o.onChange&&o.onChange.apply(o,arguments),n&&n(t,e,r)},value:b(r)}))},radio:function(e){var n=e.onFieldChange,t=e.name,r=e.value,o=e.fieldProps;return l.a.createElement(c.Radio,v()({},o,{onChange:function(){for(var e=arguments.length,a=new Array(e),u=0;u<e;u++)a[u]=arguments[u];var i=a[0].target.checked;o.onChange&&o.onChange.apply(o,a),n&&n(t,i,r)},checked:r}),o.label)},radioGroup:function(e){var n=e.onFieldChange,t=e.name,r=e.value,o=e.fieldProps;return l.a.createElement(c.Radio.Group,v()({},o,{onChange:function(){for(var e=arguments.length,a=new Array(e),u=0;u<e;u++)a[u]=arguments[u];var i=a[0].target.value;o.onChange&&o.onChange.apply(o,a),n&&n(t,i,r)},value:r}))}};function w(e){var n=e.type,t=e.name,r=e.value,o=e.fieldProps,a=void 0===o?{}:o,u=e.onFieldChange,i=_[n];return l.a.createElement(i,{name:t,value:r,fieldProps:a,onFieldChange:u})}var E,O=function(e){e.forEach((function(e){if(Object.keys(_).find((function(n){return n===e.name})))throw new Error("组件".concat(e.name,"已存在，请重新定义"));_[e.name]=e.component}))},k=function(e){var n,t=e.item,r=e.span,o=e.isVertical,a=e.value,u=e.onFieldChange,i=e.onKeyPress,f=e.validate,s=t.label,p=h()(t,["label"]),d="function"==typeof s?s():s,m=o?{labelCol:{span:24},wrapperCol:{span:24}}:{};return l.a.createElement(c.Col,{span:r,onKeyPress:i},l.a.createElement(c.Form.Item,v()({label:d,key:t.name,required:(n=t.rules,!!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1?arguments[1]:void 0,t=arguments.length>2?arguments[2]:void 0,r=e.find((function(e){return e[n]===t}));return r||null}(n,"required",!0)),validateStatus:f&&!f.state?"error":"",help:null==f?void 0:f.message},m),l.a.createElement(w,v()({},p,{isVertical:o,onFieldChange:u,value:a}))))},S=t(9),M=t.n(S),j=[{name:"required",validator:function(e){return s(e)},message:"必填"},{name:"minLength",validator:function(e,n){return e&&e.length<Number(n)},message:function(e){return"长度不小于".concat(e)}},{name:"maxLength",validator:function(e,n){return e&&e.length<=Number(n)},message:function(e){return"长度不大于".concat(e)}},{name:"length",validator:function(e,n){return e&&e.length===Number(n)},message:function(e){return"长度必须为".concat(e)}}],A=function(e){e.forEach((function(e){var n=j.findIndex((function(n){return e.name===n.name}));-1!==n&&(j[n]=e),j.push(e)}))},F=function(e,n,t){var r={state:!0,message:""};return t.some((function(e){var t,o=e.message,a=h()(e,["message"]),u=null===(t=Object.keys(a))||void 0===t?void 0:t[0],i=null==a?void 0:a[u];if(!u)return!1;var l,c=(l=u,j.find((function(e){return e.name===l})));if(!c)return!1;var f=o||c.message;if(f="function"==typeof f?f(i):f,"function"==typeof i){var s=i(n);return r={state:s,message:s?"":f},!s}if("boolean"==typeof i&&i||-1!==["string","number"].indexOf(M()(i))){var p=c.validator(n);return r={state:p,message:p?"":f},!p}return!1})),r};!function(e){e.input="input",e.search="search",e.number="number",e.password="password",e.textarea="textarea",e.select="select",e.switch="switch",e.autoComplete="autoComplete",e.checkbox="checkbox",e.checkboxGroup="checkboxGroup",e.datePicker="datePicker",e.rangePicker="rangePicker",e.timePicker="timePicker",e.radio="radio",e.radioGroup="radioGroup"}(E||(E={}));var I=l.a.useEffect,q=l.a.useState,G="FORM_".concat(f());function T(e){var n=e.gutter,t=void 0===n?24:n,r=e.span,a=void 0===r?12:r,i=e.labelDirection,s=void 0===i?"horizontal":i,d=e.labelWidth,v=void 0===d?120:d,m=e.validateOnChange,h=void 0===m||m,g=e.schema,y=e.onChange,x=e.data,C=q(void 0===x?{}:x),b=u()(C,2),P=b[0],_=b[1],w=q([]),E=u()(w,2),O=E[0],S=E[1];I((function(){return function(e,n,t){var r=p(t);if("horizontal"===n){var o=document.createElement("style");o.id=r;var a="#".concat(t," .ant-form-item {display: flex; width: 100%; flex-flow: row;}\n");a+="#".concat(t," .ant-form-item-label { width: ").concat(e,"px; }\n"),a+="#".concat(t," .ant-form-item-control {flex-grow: 1}"),o.innerHTML=a,document.head.appendChild(o)}}(v,s,G),function(){return p(G)}}),[s,v]),I((function(){var e=[];g.forEach((function(n){n.forEach((function(n){n.name&&n.rules&&(e.push({state:!0,message:"",name:n.name,rules:n.rules}),P[n.name]=P[n.name]||void 0)}))})),S(e)}),[g]);var M=function(e){var n=O.find((function(n){return n.name===e}));return{state:!n||n.state,message:(null==n?void 0:n.message)||""}},j=function(e,n,t){var r;h&&function(e,n){var t=O.find((function(n){return n.name===e}));if(t){var r=F(0,n,t.rules);t.message=r.message,t.state=r.state,S(o()(O))}}(e,n),P[e]=n,_((r=P,JSON.parse(JSON.stringify(r)))),y&&y(e,n,t)},A="vertical"===s,T=function(){if(-1!==Object.keys(O).findIndex((function(e){return!1===O[e].validated})))return!1};return l.a.createElement("form",{id:G,onSubmit:T,action:""},g.map((function(e,n){var r="row_".concat(n);return l.a.createElement(c.Row,{key:r,gutter:t},e.map((function(e){return l.a.createElement(k,{key:e.name||f(),item:e,span:e.span||a,isVertical:A,value:(t=e.name,t?P[t]||void 0:null),onFieldChange:j,onKeyPress:(n=e.type,function(e){"textarea"!==n&&13===e.charCode&&T()}),validate:M(e.name)});var n,t})))})))}}])}));