!function(e,n){if("object"==typeof exports&&"object"==typeof module)module.exports=n(require("react"),require("antd"),require("moment"));else if("function"==typeof define&&define.amd)define(["react","antd","moment"],n);else{var t="object"==typeof exports?n(require("react"),require("antd"),require("moment")):n(e.react,e.antd,e.moment);for(var r in t)("object"==typeof exports?exports:e)[r]=t[r]}}(window,(function(e,n,t){return function(e){var n={};function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}return t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:r})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(t.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var o in e)t.d(r,o,function(n){return e[n]}.bind(null,o));return r},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.p="",t(t.s=17)}([function(n,t){n.exports=e},function(e,t){e.exports=n},function(e,n){function t(){return e.exports=t=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},e.exports.default=e.exports,e.exports.__esModule=!0,t.apply(this,arguments)}e.exports=t,e.exports.default=e.exports,e.exports.__esModule=!0},function(e,n,t){var r=t(16);e.exports=function(e,n){if(null==e)return{};var t,o,a=r(e,n);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(e);for(o=0;o<u.length;o++)t=u[o],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,n){e.exports=t},function(e,n,t){var r=t(13),o=t(14),a=t(7),u=t(15);e.exports=function(e,n){return r(e)||o(e,n)||a(e,n)||u()},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,n){e.exports=function(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,n,t){var r=t(6);e.exports=function(e,n){if(e){if("string"==typeof e)return r(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?r(e,n):void 0}},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,n,t){var r=t(10),o=t(11),a=t(7),u=t(12);e.exports=function(e){return r(e)||o(e)||a(e)||u()},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,n){function t(n){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?(e.exports=t=function(e){return typeof e},e.exports.default=e.exports,e.exports.__esModule=!0):(e.exports=t=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.default=e.exports,e.exports.__esModule=!0),t(n)}e.exports=t,e.exports.default=e.exports,e.exports.__esModule=!0},function(e,n,t){var r=t(6);e.exports=function(e){if(Array.isArray(e))return r(e)},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,n){e.exports=function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,n){e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,n){e.exports=function(e){if(Array.isArray(e))return e},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,n){e.exports=function(e,n){var t=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null!=t){var r,o,a=[],u=!0,i=!1;try{for(t=t.call(e);!(u=(r=t.next()).done)&&(a.push(r.value),!n||a.length!==n);u=!0);}catch(e){i=!0,o=e}finally{try{u||null==t.return||t.return()}finally{if(i)throw o}}return a}},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,n){e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,n){e.exports=function(e,n){if(null==e)return{};var t,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)t=a[r],n.indexOf(t)>=0||(o[t]=e[t]);return o},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,n,t){"use strict";t.r(n),t.d(n,"extendFields",(function(){return w})),t.d(n,"extendRules",(function(){return A})),t.d(n,"Form",(function(){return N}));var r=t(2),o=t.n(r),a=t(8),u=t.n(a),i=t(5),l=t.n(i),c=t(0),f=t.n(c),s=t(1),p=function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8,n="1234567890ABCDEFGHIJKLMNOPQRSTUVWXYZ".split(""),t=[],r=0;r<e;r++){var o=Math.round(Math.random()*n.length);t.push(n[o])}return t.join("")},d=function(e){return""!==e&&null!=e||Array.isArray(e)&&e.length>0};var v=function(e){var n="form-label-width-".concat(e),t=document.getElementById(n);return t&&document.head.removeChild(t),n},m=t(3),h=t.n(m);var g=s.Input.Search;var y=t(4),x=t.n(y),b=function(e){return d(e)?x()(e).valueOf():null},C=function(e){return d(e)?x()(e):null},E=function(e){var n=[null,null];return Array.isArray(e)&&e.forEach((function(e,t){n[t]=b(e)})),n},_=function(e){var n=[null,null];return e&&Array.isArray(e)&&e.forEach((function(e,t){n[t]=e?x()(e):null})),n};var P={input:function(e){var n=e.onFieldChange,t=e.name,r=e.value,a=e.fieldProps;return f.a.createElement(s.Input,o()({},a,{onChange:function(){for(var e=arguments.length,o=new Array(e),u=0;u<e;u++)o[u]=arguments[u];var i=o[0].target.value;a.onChange&&a.onChange.apply(a,o),n&&n(t,i,r)},value:r}))},search:function(e){var n=e.onFieldChange,t=e.name,r=e.value,a=e.fieldProps;return f.a.createElement(g,o()({},a,{onChange:function(){for(var e=arguments.length,o=new Array(e),u=0;u<e;u++)o[u]=arguments[u];var i=o[0].target.value;a.onChange&&a.onChange.apply(a,o),n&&n(t,i,r)},value:r}))},textarea:function(e){var n=e.onFieldChange,t=e.name,r=e.value,a=e.fieldProps;return f.a.createElement(s.Input.TextArea,o()({},a,{onChange:function(){for(var e=arguments.length,o=new Array(e),u=0;u<e;u++)o[u]=arguments[u];var i=o[0].target.value;a.onChange&&a.onChange.apply(a,o),n&&n(t,i,r)},value:r}))},password:function(e){var n=e.onFieldChange,t=e.name,r=e.value,a=e.fieldProps;return f.a.createElement(s.Input.Password,o()({},a,{onChange:function(){for(var e=arguments.length,o=new Array(e),u=0;u<e;u++)o[u]=arguments[u];var i=o[0].target.value;a.onChange&&a.onChange.apply(a,o),n&&n(t,i,r)},value:r}))},number:function(e){var n=e.onFieldChange,t=e.name,r=e.value,a=e.fieldProps;return f.a.createElement(s.InputNumber,o()({},a,{onChange:function(e){a.onChange&&a.onChange(e),n&&n(t,e,r)},value:r}))},select:function(e){var n=e.onFieldChange,t=e.name,r=e.value,a=e.fieldProps;return f.a.createElement(s.Select,o()({},a,{onChange:function(e){a.onChange&&a.onChange(e),n&&n(t,e,r)},value:r}))},switch:function(e){var n=e.onFieldChange,t=e.name,r=e.value,a=e.fieldProps;return f.a.createElement(s.Switch,o()({},a,{onChange:function(){var e=arguments.length<=0?void 0:arguments[0];a.onChange&&a.onChange.apply(a,arguments),n&&n(t,e,!!r)},checked:r}))},autoComplete:function(e){var n=e.onFieldChange,t=e.name,r=e.value,a=e.fieldProps;return null!=a&&a.filterOption||(a.filterOption=function(e,n){return e&&-1!==n.value.indexOf(e)}),f.a.createElement(s.AutoComplete,o()({},a,{onChange:function(){var e=arguments.length<=0?void 0:arguments[0];a.onChange&&a.onChange.apply(a,arguments),n&&n(t,e,r)}}))},checkbox:function(e){var n=e.onFieldChange,t=e.name,r=e.value,a=e.fieldProps;return f.a.createElement(s.Checkbox,o()({},a,{onChange:function(){for(var e=arguments.length,o=new Array(e),u=0;u<e;u++)o[u]=arguments[u];var i=o[0].target.checked;a.onChange&&a.onChange.apply(a,o),n&&n(t,i,r)},checked:r}),a.label)},checkboxGroup:function(e){var n=e.onFieldChange,t=e.name,r=e.value,a=e.fieldProps;return f.a.createElement(s.Checkbox.Group,o()({},a,{onChange:function(){var e=arguments.length<=0?void 0:arguments[0];a.onChange&&a.onChange.apply(a,arguments),n&&n(t,e,r)},value:r}))},datePicker:function(e){var n=e.onFieldChange,t=e.name,r=e.value,a=e.fieldProps;return f.a.createElement(s.DatePicker,o()({},a,{onChange:function(){var e=b(arguments.length<=0?void 0:arguments[0]);a.onChange&&a.onChange.apply(a,arguments),n&&n(t,e,r)},value:C(r)}))},rangePicker:function(e){var n=e.onFieldChange,t=e.name,r=e.value,a=e.fieldProps;return f.a.createElement(s.DatePicker.RangePicker,o()({},a,{onChange:function(){var e=E(arguments.length<=0?void 0:arguments[0]);a.onChange&&a.onChange.apply(a,arguments),n&&n(t,e,r)},value:_(r)}))},timePicker:function(e){var n=e.onFieldChange,t=e.name,r=e.value,a=e.fieldProps;return f.a.createElement(s.TimePicker,o()({},a,{onChange:function(){var e=b(arguments.length<=0?void 0:arguments[0]);a.onChange&&a.onChange.apply(a,arguments),n&&n(t,e,r)},value:C(r)}))},radio:function(e){var n=e.onFieldChange,t=e.name,r=e.value,a=e.fieldProps;return f.a.createElement(s.Radio,o()({},a,{onChange:function(){for(var e=arguments.length,o=new Array(e),u=0;u<e;u++)o[u]=arguments[u];var i=o[0].target.checked;a.onChange&&a.onChange.apply(a,o),n&&n(t,i,r)},checked:r}),a.label)},radioGroup:function(e){var n=e.onFieldChange,t=e.name,r=e.value,a=e.fieldProps;return f.a.createElement(s.Radio.Group,o()({},a,{onChange:function(){for(var e=arguments.length,o=new Array(e),u=0;u<e;u++)o[u]=arguments[u];var i=o[0].target.value;a.onChange&&a.onChange.apply(a,o),n&&n(t,i,r)},value:r}))}};function O(e){var n=e.type,t=e.name,r=e.value,o=e.fieldProps,a=void 0===o?{}:o,u=e.onFieldChange,i=P[n];return f.a.createElement(i,{name:t,value:r,fieldProps:a,onFieldChange:u})}var w=function(e){e.forEach((function(e){if(Object.keys(P).find((function(n){return n===e.name})))throw new Error("组件".concat(e.name,"已存在，请重新定义"));P[e.name]=e.component}))},S=function(e){var n,t=e.item,r=e.span,a=e.isVertical,u=e.value,i=e.onFieldChange,l=e.onKeyPress,c=e.validate,p=t.label,d=h()(t,["label"]),v="function"==typeof p?p():p,m=a?{labelCol:{span:24},wrapperCol:{span:24}}:{};return f.a.createElement(s.Col,{span:r,onKeyPress:l},f.a.createElement(s.Form.Item,o()({label:v,key:t.name,required:(n=t.rules,!!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1?arguments[1]:void 0,t=arguments.length>2?arguments[2]:void 0,r=e.find((function(e){return e[n]===t}));return r||null}(n,"required",!0)),validateStatus:c&&!c.state?"error":"",help:null==c?void 0:c.message},m),f.a.createElement(O,o()({},d,{isVertical:a,onFieldChange:i,value:u}))))},j=t(9),k=t.n(j),M=[{name:"required",validator:function(e){return d(e)},message:"必填"},{name:"minLength",validator:function(e,n){return e&&e.length<Number(n)},message:function(e){return"长度不小于".concat(e)}},{name:"maxLength",validator:function(e,n){return e&&e.length<=Number(n)},message:function(e){return"长度不大于".concat(e)}},{name:"length",validator:function(e,n){return e&&e.length===Number(n)},message:function(e){return"长度必须为".concat(e)}}],A=function(e){e.forEach((function(e){var n=M.findIndex((function(n){return e.name===n.name}));-1!==n&&(M[n]=e),M.push(e)}))},F=function(e,n,t){var r={state:!0,message:""};return t.some((function(e){var t,o=e.message,a=h()(e,["message"]),u=null===(t=Object.keys(a))||void 0===t?void 0:t[0],i=null==a?void 0:a[u];if(!u)return!1;var l,c=(l=u,M.find((function(e){return e.name===l})));if(!c)return!1;var f=o||c.message;if(f="function"==typeof f?f(i):f,"function"==typeof i){var s=i(n);return r={state:s,message:s?"":f},!s}if("boolean"==typeof i&&i||-1!==["string","number"].indexOf(k()(i))){var p=c.validator(n);return r={state:p,message:p?"":f},!p}return!1})),r};function I(e){var n=e.buttonTexts,t=e.render,r=e.align,o=void 0===r?"center":r,a=e.direction,u=void 0===a?"horizontal":a,i=e.padding,l=void 0===i?"42px 0 24px 0":i,c=e.onReset,p=e.onSubmit,d=n||{},v={reset:{type:"default",cb:c,text:d.reset},submit:{type:"primary",cb:p,text:d.submit}},m=[];return Object.keys(n).forEach((function(e){n[e]&&m.push(f.a.createElement(s.Button,{type:v[e].type,key:e,onClick:v[e].cb},v[e].text))})),f.a.createElement("div",{style:{padding:l,textAlign:o}},f.a.createElement(s.Space,{align:o,direction:u},t?t(e,m):m))}var q=f.a.useEffect,R=f.a.useState,T="FORM_".concat(p());function N(e){var n=e.gutter,t=void 0===n?24:n,r=e.span,a=void 0===r?12:r,i=e.labelDirection,c=void 0===i?"horizontal":i,d=e.labelWidth,m=void 0===d?120:d,h=e.validateOnChange,g=void 0===h||h,y=e.schema,x=e.onChange,b=e.data,C=void 0===b?{}:b,E=e.submitter,_=R(C),P=l()(_,2),O=P[0],w=P[1],j=R([]),k=l()(j,2),M=k[0],A=k[1];q((function(){return function(e,n,t){var r=v(t);if("horizontal"===n){var o=document.createElement("style");o.id=r;var a="#".concat(t," .ant-form-item {display: flex; width: 100%; flex-flow: row;}\n");a+="#".concat(t," .ant-form-item-label { width: ").concat(e,"px; }\n"),a+="#".concat(t," .ant-form-item-control {flex-grow: 1}"),o.innerHTML=a,document.head.appendChild(o)}}(m,c,T),function(){v(T)}}),[c,m]),q((function(){var e=[];y.forEach((function(n){n.forEach((function(n){n.name&&n.rules&&(e.push({state:!0,message:"",name:n.name,rules:n.rules}),O[n.name]=O[n.name]||void 0)}))})),A(e)}),[y]);var N=function(e){var n=M.find((function(n){return n.name===e}));return{state:!n||n.state,message:(null==n?void 0:n.message)||""}},G=function(e,n){var t=M.find((function(n){return n.name===e}));if(t){var r=F(0,n,t.rules);t.message=r.message,t.state=r.state,A(u()(M))}},D=function(e,n,t){var r;g&&G(e,n),O[e]=n,w((r=O,JSON.parse(JSON.stringify(r)))),x&&x(e,n,t)},J="vertical"===c,K=function(e){if(e&&e.stopPropagation(),Object.keys(O).forEach((function(e){G(e,O[e])})),-1===Object.keys(M).findIndex((function(e){return!1===M[e].validated})))return O};return f.a.createElement("form",{id:T,onSubmit:K},y.map((function(e,n){var r="row_".concat(n);return f.a.createElement(s.Row,{key:r,gutter:t},e.map((function(e){return f.a.createElement(S,{key:e.name||p(),item:e,span:e.span||a,isVertical:J,value:(t=e.name,t?O[t]||void 0:null),onFieldChange:D,onKeyPress:(n=e.type,function(e){"textarea"!==n&&13===e.charCode&&K()}),validate:N(e.name)});var n,t})))})),JSON.stringify(E),E&&f.a.createElement(I,o()({},E,{onReset:function(){var e={};Object.keys(O).forEach((function(n){e[n]=null})),w(e)},onSubmit:K})))}}])}));